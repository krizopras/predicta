<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Predicta Europe ML v3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root {
      --bg: #001F3F;
      --panel: #012A5A;
      --text: #f5f5f5;
      --accent: #FFD700;
      --hover: #0a3566;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Poppins", Arial, sans-serif;
      background-color: var(--bg);
      color: var(--text);
      display: flex;
      min-height: 100vh;
    }

    /* Sol MenÃ¼ */
    aside {
      width: 250px;
      background: var(--panel);
      border-right: 2px solid var(--accent);
      padding: 15px;
      overflow-y: auto;
    }

    aside h2 {
      text-align: center;
      color: var(--accent);
      margin-bottom: 10px;
    }

    aside button {
      display: block;
      width: 100%;
      background: var(--accent);
      border: none;
      color: var(--bg);
      font-weight: 600;
      margin-bottom: 8px;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all .2s;
    }
    aside button:hover {
      background: var(--hover);
      color: var(--accent);
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    /* Ãœst MenÃ¼ */
    header {
      background: var(--panel);
      border-bottom: 2px solid var(--accent);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
    }

    header h1 {
      color: var(--accent);
      font-size: 20px;
      margin: 0;
    }

    nav button {
      background: transparent;
      color: var(--text);
      border: none;
      font-size: 15px;
      margin: 0 6px;
      cursor: pointer;
      transition: all .2s;
    }
    nav button:hover, nav button.active {
      color: var(--accent);
      text-decoration: underline;
    }

    /* Ä°Ã§erik */
    section {
      flex: 1;
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 15px;
      padding: 15px;
    }

    .card {
      background: var(--panel);
      border-radius: 8px;
      padding: 15px;
      overflow-y: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 10px;
      border-bottom: 1px solid #08315f;
      text-align: left;
    }

    th {
      color: var(--accent);
      background-color: #012A5A;
      position: sticky;
      top: 0;
    }

    tr:hover {
      background: #052a50;
    }

    .odds {
      background: var(--accent);
      color: var(--bg);
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
    }

    footer {
      text-align: center;
      padding: 10px;
      font-size: 12px;
      color: var(--accent);
      border-top: 1px solid var(--accent);
    }

    @media (max-width: 900px) {
      aside { display: none; }
      section { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <aside>
    <h2>âš½ Ligler</h2>
    <div id="leagueList">
      <button>England Premier League</button>
      <button>Italy Serie A</button>
      <button>Spain La Liga</button>
      <button>Germany Bundesliga</button>
      <button>France Ligue 1</button>
      <button>Netherlands Eredivisie</button>
      <button>Portugal Primeira Liga</button>
      <button>Turkey Super Lig</button>
      <button>Scotland Premiership</button>
      <button>Belgium Pro League</button>
      <button>Romania Liga I</button>
      <button>Poland Ekstraklasa</button>
      <button>Norway Eliteserien</button>
      <button>Sweden Allsvenskan</button>
      <button>Denmark Superliga</button>
      <button>UEFA Champions League</button>
      <button>UEFA Europa League</button>
      <button>UEFA Conference League</button>
    </div>
  </aside>

  <main>
    <header>
      <h1>Predicta Europe ML v3</h1>
      <nav>
        <button class="active">Today</button>
        <button>By Days</button>
        <button>By League</button>
        <button>Top 10</button>
        <button onclick="reloadModels()">Reload Models</button>
      </nav>
    </header>

    <section>
      <div class="card">
        <h3>Todayâ€™s Predictions</h3>
        <table id="predictionsTable">
          <thead>
            <tr><th>MaÃ§</th><th>MS</th><th>Skor</th><th>GÃ¼ven</th><th>Value</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="card">
        <h3>Top Predictions Today</h3>
        <ul id="topPreds"></ul>
      </div>
    </section>

    <footer>
      Â© 2025 Predicta Europe ML | Powered by Olcay Arslan
    </footer>
  </main>

  <script>
    // ðŸ”— Backend adresi (Railway API)
    const API_BASE = "https://predicta-production.up.railway.app";

    async function fetchPredictions() {
      const tbody = document.querySelector("#predictionsTable tbody");
      tbody.innerHTML = "<tr><td colspan='5'>YÃ¼kleniyor...</td></tr>";
      try {
        const res = await fetch(API_BASE + "/api/predictions/batch", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            matches: [
              { home_team: "Galatasaray", away_team: "FenerbahÃ§e", league: "Turkey Super Lig",
                odds: { "1": 2.05, "X": 3.30, "2": 3.40 } },
              { home_team: "Barcelona", away_team: "Real Madrid", league: "Spain La Liga",
                odds: { "1": 2.10, "X": 3.50, "2": 3.20 } },
              { home_team: "Manchester City", away_team: "Liverpool", league: "England Premier League",
                odds: { "1": 1.85, "X": 3.60, "2": 3.90 } }
            ]
          })
        });

        const data = await res.json();
        tbody.innerHTML = "";
        (data.items || []).forEach(pred => {
          const p = pred.prediction || {};
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${pred.home_team} - ${pred.away_team}</td>
            <td>${p.result || "-"}</td>
            <td>${p.score_prediction || "-"}</td>
            <td>${(p.confidence || 0).toFixed(1)}%</td>
            <td><span class="odds">${(p.value_bet?.value_index || 0).toFixed(2)}</span></td>`;
          tbody.appendChild(tr);
        });
      } catch (err) {
        tbody.innerHTML = `<tr><td colspan='5'>Hata: ${err.message}</td></tr>`;
      }
    }

    async function reloadModels() {
      alert("Modeller yeniden yÃ¼kleniyor...");
      await fetch(API_BASE + "/api/reload");
      fetchPredictions();
    }

    fetchPredictions();
  </script>
</body>
</html>
